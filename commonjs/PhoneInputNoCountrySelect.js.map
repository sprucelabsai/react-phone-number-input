{"version":3,"sources":["../source/PhoneInputNoCountrySelect.js"],"names":["createInput","defaultMetadata","PhoneInput","ref","country","value","onChange","metadata","rest","prevCountry","setPrevCountry","getParsedInputForValue","parsedInput","setParsedInput","valueForParsedInput","setValueForParsedInput","onParsedInputChange","slice","asYouType","AsYouType","input","phoneNumber","getNumber","number","React","forwardRef","propTypes","type","PropTypes","string","autoComplete","func","isRequired","inputComponent","element","object","defaultProps","console","error","formatNational"],"mappings":"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","file":"PhoneInputNoCountrySelect.js","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { AsYouType } from 'libphonenumber-js/core'\n\nimport InputBasic from './InputBasic'\n\nexport function createInput(defaultMetadata) {\n\tfunction PhoneInput({\n\t\tcountry,\n\t\tvalue,\n\t\tonChange,\n\t\tmetadata,\n\t\t...rest\n\t}, ref) {\n\t\tconst [prevCountry, setPrevCountry] = useState(country)\n\t\tconst [parsedInput, setParsedInput] = useState(getParsedInputForValue(value, country, metadata))\n\t\tconst [valueForParsedInput, setValueForParsedInput] = useState(value)\n\t\t// If `value` property has been changed externally\n\t\t// then re-initialize the component.\n\t\tuseEffect(() => {\n\t\t\tif (value !== valueForParsedInput) {\n\t\t\t\tsetParsedInput(getParsedInputForValue(value, country, metadata))\n\t\t\t\tsetValueForParsedInput(value)\n\t\t\t}\n\t\t}, [value])\n\t\t// If the `country` has been changed then re-initialize the component.\n\t\tuseEffect(() => {\n\t\t\tif (country !== prevCountry) {\n\t\t\t\tsetPrevCountry(country)\n\t\t\t\tsetParsedInput(getParsedInputForValue(value, country, metadata))\n\t\t\t}\n\t\t}, [country])\n\t\t// Call `onChange` after the new `valueForParsedInput` has been applied.\n\t\tuseEffect(() => {\n\t\t\tif (valueForParsedInput !== value) {\n\t\t\t\tonChange(valueForParsedInput)\n\t\t\t}\n\t\t}, [valueForParsedInput])\n\t\tconst onParsedInputChange = useCallback((parsedInput) => {\n\t\t\tlet value\n\t\t\tif (country) {\n\t\t\t\t// Won't allow `+` in the beginning\n\t\t\t\t// when a `country` has been specified.\n\t\t\t\tif (parsedInput && parsedInput[0] === '+') {\n\t\t\t\t\tparsedInput = parsedInput.slice(1)\n\t\t\t\t}\n\t\t\t\t// Convert `parsedInput` to `value`.\n\t\t\t\tif (parsedInput) {\n\t\t\t\t\tconst asYouType = new AsYouType(country, metadata)\n\t\t\t\t\tasYouType.input(parsedInput)\n\t\t\t\t\tconst phoneNumber = asYouType.getNumber()\n\t\t\t\t\tif (phoneNumber) {\n\t\t\t\t\t\tvalue = phoneNumber.number\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Force a `+` in the beginning of a `value`\n\t\t\t\t// when no `country` has been specified.\n\t\t\t\tif (parsedInput && parsedInput[0] !== '+') {\n\t\t\t\t\tparsedInput = '+' + parsedInput\n\t\t\t\t}\n\t\t\t\t// Convert `parsedInput` to `value`.\n\t\t\t\tif (parsedInput) {\n\t\t\t\t\tvalue = parsedInput\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetParsedInput(parsedInput)\n\t\t\tsetValueForParsedInput(value)\n\t\t}, [country, metadata, setParsedInput, setValueForParsedInput])\n\t\treturn (\n\t\t\t<InputBasic\n\t\t\t\t{...rest}\n\t\t\t\tref={ref}\n\t\t\t\tmetadata={metadata}\n\t\t\t\tcountry={country}\n\t\t\t\tvalue={parsedInput}\n\t\t\t\tonChange={onParsedInputChange} />\n\t\t)\n\t}\n\n\tPhoneInput = React.forwardRef(PhoneInput)\n\n\tPhoneInput.propTypes = {\n\t\t/**\n\t\t * HTML `<input/>` `type` attribute.\n\t\t */\n\t\ttype: PropTypes.string,\n\n\t\t/**\n\t\t * HTML `<input/>` `autocomplete` attribute.\n\t\t */\n\t\tautoComplete: PropTypes.string,\n\n\t\t/**\n\t\t * A two-letter country code for formatting `value`\n\t\t * as a national phone number (e.g. `(800) 555 35 35`).\n\t\t * Examples: \"US\", \"RU\", etc.\n\t\t * If no `country` is passed then `value`\n\t\t * is formatted as an international phone number.\n\t\t * (for example, `+7 800 555 35 35`)\n\t\t */\n\t\tcountry: PropTypes.string,\n\n\t\t/**\n\t\t * The parsed phone number.\n\t\t * Examples: `undefined`, `\"\"`, `\"+\"`, `\"+123\"`, `\"123\"`.\n\t\t */\n\t\tvalue: PropTypes.string,\n\n\t\t/**\n\t\t * Updates the `value`.\n\t\t */\n\t\tonChange: PropTypes.func.isRequired,\n\n\t\t/**\n\t\t * The `<input/>` component.\n\t\t */\n\t\tinputComponent: PropTypes.element,\n\n\t\t/**\n\t\t * `libphonenumber-js` metadata.\n\t\t */\n\t\tmetadata: PropTypes.object.isRequired\n\t}\n\n\tPhoneInput.defaultProps = {\n\t\t/**\n\t\t * HTML `<input/>` `type=\"tel\"`.\n\t\t */\n\t\ttype: 'tel',\n\n\t\t/**\n\t\t * Remember (and autofill) the value as a phone number.\n\t\t */\n\t\tautoComplete: 'tel',\n\n\t\t/**\n\t\t * `libphonenumber-js` metadata.\n\t\t */\n\t\tmetadata: defaultMetadata\n\t}\n\n\treturn PhoneInput\n}\n\nexport default createInput()\n\nfunction getParsedInputForValue(value, country, metadata) {\n\tif (!value) {\n\t\treturn ''\n\t}\n\tif (!country) {\n\t\treturn value\n\t}\n\tconst asYouType = new AsYouType(country, metadata)\n\tasYouType.input(value)\n\tconst phoneNumber = asYouType.getNumber()\n\tif (phoneNumber) {\n\t\t// Even if the actual country of the `value` being passed\n\t\t// doesn't match the `country` property,\n\t\t// still format the national number.\n\t\t// This is some kind of an \"error recovery\" procedure.\n\t\tif (phoneNumber.country && phoneNumber.country !== country) {\n\t\t\tconsole.error(`[react-phone-number-input] Phone number ${value} corresponds to country ${phoneNumber.country} but ${country} was specified instead.`)\n\t\t}\n\t\treturn phoneNumber.formatNational()\n\t} else {\n\t\treturn ''\n\t}\n}"]}